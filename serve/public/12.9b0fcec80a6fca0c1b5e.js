(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{hbU2:function(t,e,n){"use strict";n.r(e),n.d(e,"PaymentGraphicalViewModule",function(){return b});var a=n("ofXK"),o=n("MO+k"),r=n("fXoL"),l=n("qXBG"),i=n("5eHb"),s=n("3Pt+"),c=n("tk/3"),d=n("tyNb");function m(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"a",28),r["\u0275\u0275element"](1,"i",29),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",t.percenValForPrev,"%")}}function h(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"a",30),r["\u0275\u0275element"](1,"i",31),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",t.percenValForPrev,"%")}}function u(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"a",30),r["\u0275\u0275element"](1,"i",31),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",t.percenValForForcast,"%")}}function p(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"a",30),r["\u0275\u0275element"](1,"i",29),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",t.percenValForForcast,"%")}}const v=function(){return["/admin/payment-dashboard/graph-view"]},g=function(){return["/admin/payment-dashboard"]},M=[{path:"",component:(()=>{class t{constructor(t,e,n,a){this.authService=t,this.toastr=e,this.fb=n,this.http=a,this.lastFiveMonths=[],this.checkPayHistory=!1,this.currentMnthCostInc=!1,this.currentMnthCostDec=!1,this.currentMnthForcastCostInc=!1,this.currentMnthForecastCostDec=!1}ngOnInit(){this.getLastFiveMonths(),this.getDatasByDate(),this.getAllPayHistory();let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.currentDate=t,this.thisMonthStartDate=e;var n=Math.round(Math.abs((this.thisMonthStartDate-this.currentDate)/864e5));this.calcBetweenDays=n;const a=(new Date).toDateString().split(" ");this.currentMonth=a[1]+" "+a[3];let o=new Date;o.setMonth(o.getMonth()-1);const r=o.toLocaleString("default",{month:"long"});this.previousMonth=r+" "+o.getFullYear();var l=(new Date).toISOString().slice(0,10),i=new Date(l);i.setMonth(i.getMonth()-1),this.previousMonthCurrentDate=i.toISOString().slice(0,10),this.previousMonthFirstDate=i.setDate(1)}getLastFiveMonths(){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date,n=(e.getFullYear(),e.getMonth()),a=0;do{n<0&&(n=11),this.lastFiveMonths.push(t[n]),n--,a++}while(a<5)}getDatasByDate(){let t=localStorage.getItem("organization");this.getDataByDate=this.authService.getDataByDate(t).subscribe(t=>{let e=t.data;this.currencySymbol=t.currencySymbol,this.lastFiveMonthsData=t.costForMonth;let n=t.costForMonth.currentMonthCost.toFixed(2),a=t.costForMonth.lastMonthCost.toFixed(2);var r=[n,a,t.costForMonth.lastPreviousMonthCost.toFixed(2),t.costForMonth.beforeLastPreviousMonthCost.toFixed(2),t.costForMonth.PreviousFifthMonthCost.toFixed(2)];console.log(r);let l=[];var i=this.lastFiveMonths;r[0]>0&&l.push(i[0]),r[1]>0&&l.push(i[1]),r[2]>0&&l.push(i[2]),r[3]>0&&l.push(i[3]),r[4]>0&&l.push(i[4]),console.log(l),document.getElementById("myChart"),new o.Chart("myChart",{type:"doughnut",data:{labels:l,datasets:[{backgroundColor:["#b91d47","#00aba9","#2b5797","#e8c3b9","#1e7145"],data:r}]},options:{title:{display:!1,text:"Spends Graphical View"}}}),this.monthToDayData=e.totalMonthPeroid.toFixed(2),parseFloat(n)>=parseFloat(a)?(this.currentMnthCostInc=!0,this.currentMnthCostDec=!1):parseFloat(n)<parseFloat(a)&&(this.currentMnthCostDec=!0,this.currentMnthCostInc=!1),this.percenValForPrev=(100*(n-a)/n).toFixed(2);let s=(n-a).toFixed(2);this.sumOfPrevCost=s,console.log("check prev amount",a),this.forecastTotal=(30*this.monthToDayData/this.calcBetweenDays).toFixed(2),this.forecastTotalForChart=(30*a/this.calcBetweenDays).toFixed(2);let c=this.forecastTotal,d=this.forecastTotalForChart;this.percenValForForcast=(100*(c-d)/c).toFixed(2),console.log(a,"previous mnth forecast");let m=(c-d).toFixed(2);this.sumOfForecastCost=m,console.log("check sum of forecast",m),parseFloat(c)>=parseFloat(d)?(this.currentMnthForcastCostInc=!0,this.currentMnthForecastCostDec=!1):parseFloat(c)<parseFloat(d)&&(this.currentMnthForecastCostDec=!0,this.currentMnthForcastCostInc=!1)},()=>{this.toastr.error("Something went wrong","Error!")})}getAllPayHistory(){this.availableAmount=localStorage.getItem("pendingAmount");let t=localStorage.getItem("organization");this.getPaymentHistory=this.authService.getPaymentHistory(t).subscribe(t=>{let e=t.data,n=e.length;console.log("length date",n),0==n?(this.lastPaidAmount=0,this.toastr.info("No transaction found","Info!")):(this.checkPayHistory=!1,this.lastPaidAmount=e[0].calculatedCost,this.lastPaidDate=e[0].creationDate,console.log(t.data))},()=>{this.toastr.error("Something went wrong","Error!")})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](i.b),r["\u0275\u0275directiveInject"](s.FormBuilder),r["\u0275\u0275directiveInject"](c.b))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-payment-graphical-view"]],decls:62,vars:32,consts:[["id","ex1","role","tablist",1,"nav","nav-tabs","nav-fill","mb-3"],["role","presentation",1,"nav-item"],["id","ex2-tab-2","data-mdb-toggle","tab","role","tab","aria-controls","ex2-tabs-2","aria-selected","false",1,"nav-link","active",3,"routerLink"],["id","ex2-tab-1","data-mdb-toggle","tab","role","tab","aria-controls","ex2-tabs-1","aria-selected","true",1,"nav-link",3,"routerLink"],[1,"overview"],[1,"container-fluid"],[1,"card","mb-5","mt-3",2,"max-width","100%"],[1,"card-body"],[1,"col-12","chat-content","border-bottom","mt-4"],[1,"row"],[1,"col-lg-4","col-md-6","Month-date-chart"],[1,"d-flex"],[1,"font-weight-bold"],[1,"fas","fa-question-circle","ml-3"],[1,"amount-chart","d-flex","justify-content-between","align-items-center"],[1,"mb-4"],[1,"font-weight-bold","mb-0"],[1,"d-flex","flex-column","mb-4"],["class","text-danger text-decoration-none",4,"ngIf"],["class","text-success text-decoration-none",4,"ngIf"],[1,"text-secondary"],[1,"col-lg-4","col-md-6","Month-date-chart","border-left","pl-5"],[1,"font-weight-bold","mb-0","availableCredit"],[1,"col-12","chart","mb-5"],[1,"mt-3","mb-3"],[1,"col-12","chat-main","d-flex","justify-content-center"],[1,"col-12"],["id","myChart"],[1,"text-danger","text-decoration-none"],[1,"fas","fa-arrow-down","mr-3"],[1,"text-success","text-decoration-none"],[1,"fas","fa-arrow-up","mr-3"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"ul",0),r["\u0275\u0275elementStart"](1,"li",1),r["\u0275\u0275elementStart"](2,"a",2),r["\u0275\u0275text"](3,"Graphical View"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"li",1),r["\u0275\u0275elementStart"](5,"a",3),r["\u0275\u0275text"](6,"Payment Overview"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"section",4),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"div",7),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275elementStart"](12,"div",9),r["\u0275\u0275elementStart"](13,"div",10),r["\u0275\u0275elementStart"](14,"div",11),r["\u0275\u0275elementStart"](15,"p",12),r["\u0275\u0275text"](16),r["\u0275\u0275pipe"](17,"date"),r["\u0275\u0275pipe"](18,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"a"),r["\u0275\u0275element"](20,"i",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",14),r["\u0275\u0275elementStart"](22,"div",15),r["\u0275\u0275elementStart"](23,"p",16),r["\u0275\u0275text"](24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"div",17),r["\u0275\u0275template"](26,m,3,1,"a",18),r["\u0275\u0275template"](27,h,3,1,"a",19),r["\u0275\u0275elementStart"](28,"small",20),r["\u0275\u0275text"](29),r["\u0275\u0275pipe"](30,"date"),r["\u0275\u0275pipe"](31,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",21),r["\u0275\u0275elementStart"](33,"div",11),r["\u0275\u0275elementStart"](34,"p",12),r["\u0275\u0275text"](35),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"a"),r["\u0275\u0275element"](37,"i",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"div",14),r["\u0275\u0275elementStart"](39,"div",15),r["\u0275\u0275elementStart"](40,"p",16),r["\u0275\u0275text"](41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"div",17),r["\u0275\u0275template"](43,u,3,1,"a",19),r["\u0275\u0275template"](44,p,3,1,"a",19),r["\u0275\u0275elementStart"](45,"small",20),r["\u0275\u0275text"](46),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",21),r["\u0275\u0275elementStart"](48,"div",11),r["\u0275\u0275elementStart"](49,"p",12),r["\u0275\u0275text"](50,"Available Credits"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"a"),r["\u0275\u0275element"](52,"i",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](53,"div",14),r["\u0275\u0275elementStart"](54,"div",15),r["\u0275\u0275elementStart"](55,"p",22),r["\u0275\u0275text"](56),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](57,"div",23),r["\u0275\u0275element"](58,"div",24),r["\u0275\u0275elementStart"](59,"div",25),r["\u0275\u0275elementStart"](60,"div",26),r["\u0275\u0275element"](61,"canvas",27),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction0"](30,v)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction0"](31,g)),r["\u0275\u0275advance"](11),r["\u0275\u0275textInterpolate2"](" ",r["\u0275\u0275pipeBind1"](17,22,e.thisMonthStartDate)," - ",r["\u0275\u0275pipeBind1"](18,24,e.currentDate)," (total cost) "),r["\u0275\u0275advance"](8),r["\u0275\u0275textInterpolate2"](" ",e.currencySymbol," ",e.monthToDayData||0," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.currentMnthCostDec),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.currentMnthCostInc),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate4"](" ",e.currencySymbol," ",e.sumOfPrevCost," over ",r["\u0275\u0275pipeBind1"](30,26,e.previousMonthFirstDate)," - ",r["\u0275\u0275pipeBind1"](31,28,e.previousMonthCurrentDate),""),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",e.currentMonth," (forecasted total cost) "),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate2"](" ",e.currencySymbol," ",e.forecastTotal||0," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.currentMnthForcastCostInc),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.currentMnthForecastCostDec),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate3"](" ",e.currencySymbol," ",e.sumOfForecastCost," over ",e.previousMonth,""),r["\u0275\u0275advance"](10),r["\u0275\u0275textInterpolate2"](" ",e.currencySymbol," ",e.availableAmount||0," "))},directives:[d.h,a.NgIf],pipes:[a.DatePipe],styles:["ul[_ngcontent-%COMP%]{margin-top:6.5rem}#ex1[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{border:0!important}#ex1[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-transform:uppercase;color:#000}.nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#00f!important}canvas[_ngcontent-%COMP%]{display:block;max-width:60%!important;width:60%!important;margin:0 20%!important}.availableCredit[_ngcontent-%COMP%]{color:#28a745}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[d.i.forChild(M)],d.i]}),t})(),b=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.CommonModule,f]]}),t})()}}]);